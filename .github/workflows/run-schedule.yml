name: Run Schedule Every 2 Hours

on:
  schedule:
    # Har 2 soatda (UTC)
    - cron: '0 */2 * * *'

  # Qo‘lda ishga tushirish uchun (Actions bo‘limida “Run workflow” tugmasi)
  workflow_dispatch:

jobs:
  trigger-deno:
    runs-on: ubuntu-latest
    steps:
      - name: Send POST request to Deno Deploy
        run: |
          response=$(curl -s -w "%{http_code}" -X POST \
            -H "Content-Type: application/json" \
            https://youtube-automasion.menturkmen222-debug.deno.net/run-schedule \
            -o /dev/null)
          
          if [ "$response" -eq 200 ]; then
            echo "✅ Success: Deno endpoint responded with 200"
          else
            echo "❌ Error: Deno endpoint responded with $response"
            exit 1
          fi
